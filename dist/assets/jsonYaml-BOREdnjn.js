import{t as a}from"./site-CkTLYdsb.js";const t={input:document.getElementById("jyInput"),toYaml:document.getElementById("jyToYamlBtn"),toJson:document.getElementById("jyToJsonBtn"),csvToJson:document.getElementById("jyCsvToJsonBtn"),jsonToCsv:document.getElementById("jyJsonToCsvBtn"),clear:document.getElementById("jyClearBtn"),output:document.getElementById("jyOutput"),message:document.getElementById("jyMessage")};function o(e,n=!1){t.message.textContent=e,t.message.classList.toggle("message--error",n)}function m(){try{const e=JSON.parse(t.input.value);if(!window.jsyaml)throw new Error("js-yaml not loaded");t.output.value=window.jsyaml.dump(e,{lineWidth:120}),o(a("jsonyaml.success.toYaml"))}catch(e){o(a("jsonyaml.error",{message:e.message}),!0)}}function d(){try{if(!window.jsyaml)throw new Error("js-yaml not loaded");const e=window.jsyaml.load(t.input.value);t.output.value=JSON.stringify(e,null,2),o(a("jsonyaml.success.toJson"))}catch(e){o(a("jsonyaml.error",{message:e.message}),!0)}}function y(e){const n=e.split(/\r?\n/).filter(Boolean);if(!n.length)return[];const c=n[0].split(",").map(s=>s.trim());return n.slice(1).map(s=>{const l=s.split(",").map(r=>r.trim()),u={};return c.forEach((r,i)=>{u[r]=l[i]??""}),u})}function p(e){if(!Array.isArray(e)||e.length===0)return"";const n=Object.keys(e[0]),c=[n.join(",")];return e.forEach(s=>{c.push(n.map(l=>String(s[l]??"").replaceAll(","," ")).join(","))}),c.join(`
`)}function g(){try{t.output.value=JSON.stringify(y(t.input.value),null,2),o("CSV → JSON 변환 완료.")}catch(e){o(`변환 실패: ${e.message}`,!0)}}function v(){try{t.output.value=p(JSON.parse(t.input.value)),o("JSON → CSV 변환 완료.")}catch(e){o(`변환 실패: ${e.message}`,!0)}}t.toYaml.addEventListener("click",m);t.toJson.addEventListener("click",d);t.csvToJson.addEventListener("click",g);t.jsonToCsv.addEventListener("click",v);t.clear.addEventListener("click",()=>{t.input.value="",t.output.value="",o("")});document.querySelectorAll("button[data-copy]").forEach(e=>{e.addEventListener("click",async()=>{const n=document.getElementById(e.dataset.copy);n&&(await navigator.clipboard.writeText(n.value||""),o(a("common.copySuccess")))})});
