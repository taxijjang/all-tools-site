import"./site-BfQdIzzV.js";const e={text:document.getElementById("qrText"),size:document.getElementById("qrSize"),generate:document.getElementById("qrGenerateBtn"),image:document.getElementById("qrImage"),download:document.getElementById("qrDownloadBtn"),scanFile:document.getElementById("qrScanFile"),scanOutput:document.getElementById("qrScanOutput"),message:document.getElementById("qrMessage")};function a(t,n=!1){e.message.textContent=t,e.message.classList.toggle("message--error",n)}function c(){const t=e.text.value.trim(),n=Number(e.size.value||256);if(!t){a("텍스트를 입력하세요.",!0);return}if(!window.QRCode||!window.QRCode.toDataURL){a("QR 라이브러리를 불러오지 못했습니다.",!0);return}window.QRCode.toDataURL(t,{width:n,margin:1,errorCorrectionLevel:"M"},(r,o)=>{if(r){a("QR 생성에 실패했습니다.",!0);return}e.image.src=o,e.image.hidden=!1,e.download.disabled=!1,a("QR 코드를 생성했습니다.")})}async function i(t){if(!("BarcodeDetector"in window)){a("이 브라우저는 QR 스캔을 지원하지 않습니다.",!0);return}try{const n=new BarcodeDetector({formats:["qr_code"]}),r=await createImageBitmap(t),o=await n.detect(r);if(!o.length){e.scanOutput.value="",a("QR 코드를 찾지 못했습니다.",!0);return}e.scanOutput.value=o.map(d=>d.rawValue||"").join(`
`),a("QR 스캔 완료.")}catch{a("QR 스캔 처리 중 오류가 발생했습니다.",!0)}}e.generate.addEventListener("click",c);e.download.addEventListener("click",()=>{if(!e.image.src)return;const t=document.createElement("a");t.href=e.image.src,t.download="qr-code.png",t.click()});e.scanFile.addEventListener("change",async t=>{var r;const n=(r=t.target.files)==null?void 0:r[0];n&&await i(n)});c();
