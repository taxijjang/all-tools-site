import{t as m}from"./site-LBKiOaGe.js";const n={left:document.getElementById("diffLeft"),right:document.getElementById("diffRight"),compare:document.getElementById("diffCompareBtn"),clear:document.getElementById("diffClearBtn"),output:document.getElementById("diffOutput"),unified:document.getElementById("diffUnified"),message:document.getElementById("diffMessage")};function g(d,t=!1){n.message.textContent=d,n.message.classList.toggle("message--error",t)}function p(d){return d.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")}function h(d,t){const l=d.split(`
`),s=t.split(`
`),e=l.length,u=s.length,o=Array.from({length:e+1},()=>Array(u+1).fill(0));for(let f=e-1;f>=0;f-=1)for(let c=u-1;c>=0;c-=1)l[f]===s[c]?o[f][c]=o[f+1][c+1]+1:o[f][c]=Math.max(o[f+1][c],o[f][c+1]);const r=[];let i=0,a=0;for(;i<e&&a<u;)l[i]===s[a]?(r.push({type:"same",text:l[i]}),i+=1,a+=1):o[i+1][a]>=o[i][a+1]?(r.push({type:"del",text:l[i]}),i+=1):(r.push({type:"add",text:s[a]}),a+=1);for(;i<e;)r.push({type:"del",text:l[i]}),i+=1;for(;a<u;)r.push({type:"add",text:s[a]}),a+=1;return r}function y(){const d=h(n.left.value,n.right.value);let t=0,l="",s="";for(const e of d)e.type==="same"&&(l+=`<div class="diff-line"><span class="diff-tag diff-tag-same"> </span>${p(e.text)}</div>`,s+=` ${e.text}
`),e.type==="add"&&(t+=1,l+=`<div class="diff-line diff-add"><span class="diff-tag">+</span>${p(e.text)}</div>`,s+=`+${e.text}
`),e.type==="del"&&(t+=1,l+=`<div class="diff-line diff-del"><span class="diff-tag">-</span>${p(e.text)}</div>`,s+=`-${e.text}
`);n.output.innerHTML=l,n.unified.value=s.trimEnd(),g(t?m("diff.result.changed",{count:t}):m("diff.result.same"))}n.compare.addEventListener("click",y);n.clear.addEventListener("click",()=>{n.left.value="",n.right.value="",n.output.textContent="",n.unified.value="",g("")});document.querySelectorAll("button[data-copy]").forEach(d=>{d.addEventListener("click",async()=>{const t=document.getElementById(d.dataset.copy);t&&(await navigator.clipboard.writeText(t.value||t.textContent||""),g(m("common.copySuccess")))})});y();
