import{t as n}from"./site-DyjqDVpA.js";const f=document.getElementById("jsonInput"),m=document.getElementById("jsonOutput"),d=document.getElementById("jsonMeta"),h=document.getElementById("jsonMessage"),p=document.getElementById("jsonHighlight"),i=document.getElementById("jsonTree"),g=document.getElementById("jsonSearch"),B=document.getElementById("collapseTreeBtn");function a(e,t=!1){h.textContent=e,h.classList.toggle("message--error",t)}function $(e){const t=document.getElementById(e);if(!t)return;const s=t.value||t.textContent||"";navigator.clipboard.writeText(s).then(()=>a(n("common.copySuccess"))).catch(()=>a(n("common.copyFail"),!0))}function b(e){if(Array.isArray(e))return n("json.meta.array",{count:e.length});if(e&&typeof e=="object"){const t=Object.keys(e),s=t.slice(0,5).join(", "),o=t.length>5?", …":"",r=t.length?`${s}${o}`:"—";return n("json.meta.object",{count:t.length,examples:r})}return n("json.meta.primitive",{type:typeof e})}function C(e){return e.replace(/[&<>"']/g,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return t}})}function T(e){return C(e).replace(/(&quot;(?:\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*&quot;)(?=\s*:)/g,'<span class="token token-key">$1</span>').replace(/(:\s*)(&quot;(?:\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*&quot;)/g,'$1<span class="token token-string">$2</span>').replace(/\b(true|false|null)\b/g,'<span class="token token-boolean">$1</span>').replace(/(-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)/g,'<span class="token token-number">$1</span>')}function L(e){return Array.isArray(e)?`${n("json.treeNode.array")} · ${e.length}`:e&&typeof e=="object"?`${n("json.treeNode.object")} · ${Object.keys(e).length}`:typeof e=="string"?`"${e}"`:String(e)}function k(e,t,s=[]){const o=`${e??""} ${typeof t} ${JSON.stringify(t??"").toLowerCase()}`;if(t&&typeof t=="object"){const l=document.createElement("details");l.className="json-node",l.open=s.length<=1,l.dataset.filterValue=o;const j=document.createElement("summary");return j.textContent=`${e??"(root)"} • ${L(t)}`,l.appendChild(j),Object.entries(t).forEach(([E,I])=>{l.appendChild(k(E,I,[...s,E]))}),l}const r=document.createElement("div");r.className="json-leaf",r.dataset.filterValue=o;const c=document.createElement("span");c.className="json-leaf__key",c.textContent=e??"value";const u=document.createElement("span");return u.className="json-leaf__value",u.textContent=L(t),r.append(c,u),r}function N(e){i.innerHTML="",i.appendChild(k(null,e))}function S(e){const t=e.trim().toLowerCase();i.querySelectorAll("[data-filter-value]").forEach(o=>{var c;if(!t){o.classList.remove("is-dim"),o.classList.remove("is-match");return}const r=(c=o.dataset.filterValue)==null?void 0:c.toLowerCase().includes(t);o.classList.toggle("is-match",!!r),o.classList.toggle("is-dim",!r)})}function O(){i.querySelectorAll("details.json-node").forEach(e=>{e.open=!1})}function y({pretty:e=!0}={}){try{const t=f.value.trim();if(!t){m.value="",p.innerHTML="",i.innerHTML="",d.textContent=n("json.meta.empty"),a(n("messages.json.empty"));return}const s=JSON.parse(t),o=e?JSON.stringify(s,null,2):JSON.stringify(s);m.value=o,p.innerHTML=T(JSON.stringify(s,null,2)),N(s),d.textContent=b(s),a(e?n("messages.json.pretty"):n("messages.json.compact")),S(g.value)}catch(t){a(n("messages.json.error",{message:t.message}),!0)}}document.getElementById("formatBtn").addEventListener("click",()=>y({pretty:!0}));document.getElementById("minifyBtn").addEventListener("click",()=>y({pretty:!1}));document.getElementById("copyJsonBtn").addEventListener("click",()=>$("jsonOutput"));document.getElementById("clearBtn").addEventListener("click",()=>{f.value="",m.value="",p.innerHTML="",i.innerHTML="",d.textContent=n("json.meta.empty"),a(n("messages.json.cleared"))});document.getElementById("sampleBtn").addEventListener("click",()=>{const e={service:"stateless-tools",version:"1.0.0",updatedAt:new Date().toISOString(),features:["uuid","base64","json-viewer"],flags:{beta:!0,privacySafe:!0}};f.value=JSON.stringify(e,null,2),a(n("messages.json.sample")),y({pretty:!0})});g&&g.addEventListener("input",e=>{S(e.target.value)});B&&B.addEventListener("click",()=>{O()});
