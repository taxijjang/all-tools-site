import{t as n}from"./site-B_cEvmQD.js";const l=document.getElementById("jwtInput"),j=document.getElementById("jwtHeader"),w=document.getElementById("jwtPayload"),m=document.getElementById("jwtMessage"),i=document.getElementById("jwtMeta"),u=document.getElementById("jwtSnippet");function s(t,e=!1){m.textContent=t,m.classList.toggle("message--error",e)}function p(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),o=(4-e.length%4)%4,r=e+"=".repeat(o),d=atob(r);let a="";for(let c=0;c<d.length;c+=1)a+=`%${`00${d.charCodeAt(c).toString(16)}`.slice(-2)}`;return decodeURIComponent(a)}function g(t){return JSON.stringify(t,null,2)}function f(t){if(!t){i.textContent="";return}const e=Math.floor(Date.now()/1e3),o=t.exp,r=t.nbf,d=[];if(typeof o=="number"){const a=o<e,c=new Date(o*1e3).toISOString();d.push(a?n("jwt.meta.expired",{date:c}):n("jwt.meta.expires",{date:c}))}if(typeof r=="number"){const a=r<=e,c=new Date(r*1e3).toISOString();d.push(a?n("jwt.meta.nbfActive",{date:c}):n("jwt.meta.nbfPending",{date:c}))}i.textContent=d.join(" Â· ")}function y(t){if(!u)return;const e=["// Node.js","import jwt from 'jsonwebtoken';",`const decoded = jwt.decode(${JSON.stringify(t)});`,"","# shell (jq)",`echo ${t?`"${t}"`:"$TOKEN"} | cut -d'.' -f2 | base64 --decode | jq`].join(`
`);u.textContent=e}function I(){try{const t=l.value.trim();if(!t){s(n("jwt.error.empty"),!0);return}const e=t.split(".");if(e.length<2){s(n("jwt.error.format"),!0);return}const o=JSON.parse(p(e[0])),r=JSON.parse(p(e[1]));j.textContent=g(o),w.textContent=g(r),f(r),s(n("jwt.success")),y(t)}catch{s(n("jwt.error.decode"),!0)}}document.getElementById("decodeJwtBtn").addEventListener("click",I);document.getElementById("jwtClearBtn").addEventListener("click",()=>{l.value="",j.textContent="",w.textContent="",i.textContent="",s("")});document.getElementById("jwtSampleBtn").addEventListener("click",()=>{const t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkRldlVzZXIiLCJpYXQiOjE1MTYyMzkwMjIsImV4cCI6MjUxNjIzOTAyMn0.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ";l.value=t,I()});document.querySelectorAll("button[data-copy]").forEach(t=>{t.addEventListener("click",()=>{const e=document.getElementById(t.dataset.copy);if(!e)return;const o=e.value||e.textContent||"";navigator.clipboard.writeText(o).then(()=>s(n("common.copySuccess"))).catch(()=>s(n("common.copyFail"),!0))})});
