import{t as n}from"./site-3xrs3AWN.js";import{t as i}from"./browser-DrQvcsJH.js";const e={text:document.getElementById("qrText"),size:document.getElementById("qrSize"),generate:document.getElementById("qrGenerateBtn"),image:document.getElementById("qrImage"),download:document.getElementById("qrDownloadBtn"),scanFile:document.getElementById("qrScanFile"),scanOutput:document.getElementById("qrScanOutput"),message:document.getElementById("qrMessage")};function a(t,r=!1){e.message.textContent=t,e.message.classList.toggle("message--error",r)}async function s(){const t=e.text.value.trim(),r=Number(e.size.value||256);if(!t){a(n("qr.error.empty"),!0);return}try{const c=await i(t,{width:r,margin:1,errorCorrectionLevel:"M"});e.image.src=c,e.image.hidden=!1,e.download.disabled=!1,a(n("qr.success.generated"))}catch{a(n("qr.error.generate"),!0)}}async function m(t){if(!("BarcodeDetector"in window)){a(n("qr.error.unsupported"),!0);return}try{const r=new BarcodeDetector({formats:["qr_code"]}),c=await createImageBitmap(t),o=await r.detect(c);if(!o.length){e.scanOutput.value="",a(n("qr.error.notFound"),!0);return}e.scanOutput.value=o.map(d=>d.rawValue||"").join(`
`),a(n("qr.success.scanned"))}catch{a(n("qr.error.scan"),!0)}}e.generate.addEventListener("click",s);e.download.addEventListener("click",()=>{if(!e.image.src)return;const t=document.createElement("a");t.href=e.image.src,t.download="qr-code.png",t.click()});e.scanFile.addEventListener("change",async t=>{var c;const r=(c=t.target.files)==null?void 0:c[0];r&&await m(r)});s();
