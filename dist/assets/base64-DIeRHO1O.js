import{t as o}from"./site-iL5_zn86.js";const g=document.getElementById("plainInput"),p=document.getElementById("base64Output"),d=document.getElementById("urlSafeEncode"),E=document.getElementById("base64Input"),u=document.getElementById("stripWhitespace"),i=document.getElementById("urlSafeDecode"),S=document.getElementById("plainOutput"),b=document.getElementById("base64Message"),r=document.getElementById("fileInput"),m=document.getElementById("downloadFileBtn"),f=document.getElementById("downloadFileName"),y=document.getElementById("base64Snippet");function s(e,t=!1){b.textContent=e,b.classList.toggle("message--error",t)}function k(e){const t=document.getElementById(e);if(!t)return;const n=t.value||t.textContent||"";navigator.clipboard.writeText(n).then(()=>s(o("common.copySuccess"))).catch(()=>s(o("common.copyFail"),!0))}function h(e){const t=new TextEncoder().encode(e);let n="";return t.forEach(c=>{n+=String.fromCharCode(c)}),btoa(n)}function w(e){const t=atob(e),n=new Uint8Array(t.length);for(let c=0;c<t.length;c+=1)n[c]=t.charCodeAt(c);return new TextDecoder().decode(n)}function C(e){const t=new Uint8Array(e);let n="";const c=32768;for(let a=0;a<t.length;a+=c){const I=t.subarray(a,a+c);n+=String.fromCharCode(...I)}return btoa(n)}function L(e){const t=atob(e),n=new Uint8Array(t.length);for(let c=0;c<t.length;c+=1)n[c]=t.charCodeAt(c);return n}function U(e,t="decoded.bin"){const n=new Blob([e],{type:"application/octet-stream"}),c=URL.createObjectURL(n),a=document.createElement("a");a.href=c,a.download=t||"decoded.bin",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(c)}function B(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function x(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function v(e){let t=e||"";return u!=null&&u.checked&&(t=t.replace(/\s+/g,"")),i!=null&&i.checked&&(t=x(t)),t}function O(e){return`'${e.replace(/'/g,"'\\''")}'`}function l(){if(!y)return;const e=g.value||'console.log("hello tools");',t=p.value||h(e),n=["// Node.js",`const text = ${JSON.stringify(e)};`,"const encoded = Buffer.from(text, 'utf8').toString('base64');","","# shell",`printf %s ${O(e)} | base64`,"","# Result",t].join(`
`);y.textContent=n}document.querySelectorAll("button[data-copy]").forEach(e=>{e.addEventListener("click",()=>k(e.dataset.copy))});document.getElementById("encodeBtn").addEventListener("click",()=>{try{const e=h(g.value||"");p.value=d.checked?B(e):e,s(o("messages.base64.encodeSuccess")),l()}catch{s(o("messages.base64.encodeError"),!0)}});document.getElementById("decodeBtn").addEventListener("click",()=>{try{const e=v(E.value);S.value=w(e),s(o("messages.base64.decodeSuccess")),l()}catch{s(o("messages.base64.decodeError"),!0)}});r==null||r.addEventListener("change",async()=>{var t;const e=(t=r.files)==null?void 0:t[0];if(e)try{const n=await e.arrayBuffer();let c=C(n);d!=null&&d.checked&&(c=B(c)),p.value=c,g.value="",s(o("messages.base64.fileEncoded",{name:e.name})),l()}catch{s(o("messages.base64.fileError"),!0)}finally{r.value=""}});m==null||m.addEventListener("click",()=>{try{const e=v(E.value);if(!e){s(o("messages.base64.decodeError"),!0);return}const t=L(e);U(t,(f==null?void 0:f.value)||"decoded.bin"),s(o("messages.base64.fileDecoded"))}catch{s(o("messages.base64.fileError"),!0)}});l();
