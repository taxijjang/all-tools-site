import"./site-CIRqnWQe.js";const n={left:document.getElementById("diffLeft"),right:document.getElementById("diffRight"),compare:document.getElementById("diffCompareBtn"),clear:document.getElementById("diffClearBtn"),output:document.getElementById("diffOutput"),unified:document.getElementById("diffUnified"),message:document.getElementById("diffMessage")};function m(d,t=!1){n.message.textContent=d,n.message.classList.toggle("message--error",t)}function p(d){return d.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")}function y(d,t){const l=d.split(`
`),a=t.split(`
`),e=l.length,u=a.length,o=Array.from({length:e+1},()=>Array(u+1).fill(0));for(let f=e-1;f>=0;f-=1)for(let c=u-1;c>=0;c-=1)l[f]===a[c]?o[f][c]=o[f+1][c+1]+1:o[f][c]=Math.max(o[f+1][c],o[f][c+1]);const r=[];let i=0,s=0;for(;i<e&&s<u;)l[i]===a[s]?(r.push({type:"same",text:l[i]}),i+=1,s+=1):o[i+1][s]>=o[i][s+1]?(r.push({type:"del",text:l[i]}),i+=1):(r.push({type:"add",text:a[s]}),s+=1);for(;i<e;)r.push({type:"del",text:l[i]}),i+=1;for(;s<u;)r.push({type:"add",text:a[s]}),s+=1;return r}function g(){const d=y(n.left.value,n.right.value);let t=0,l="",a="";for(const e of d)e.type==="same"&&(l+=`<div class="diff-line"><span class="diff-tag diff-tag-same"> </span>${p(e.text)}</div>`,a+=` ${e.text}
`),e.type==="add"&&(t+=1,l+=`<div class="diff-line diff-add"><span class="diff-tag">+</span>${p(e.text)}</div>`,a+=`+${e.text}
`),e.type==="del"&&(t+=1,l+=`<div class="diff-line diff-del"><span class="diff-tag">-</span>${p(e.text)}</div>`,a+=`-${e.text}
`);n.output.innerHTML=l,n.unified.value=a.trimEnd(),m(t?`변경 라인 ${t}개`:"차이가 없습니다.")}n.compare.addEventListener("click",g);n.clear.addEventListener("click",()=>{n.left.value="",n.right.value="",n.output.textContent="",n.unified.value="",m("")});document.querySelectorAll("button[data-copy]").forEach(d=>{d.addEventListener("click",async()=>{const t=document.getElementById(d.dataset.copy);t&&(await navigator.clipboard.writeText(t.value||t.textContent||""),m("복사했습니다."))})});g();
