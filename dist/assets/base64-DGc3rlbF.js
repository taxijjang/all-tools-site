import{t as o}from"./site-CzAw_qQU.js";const y=document.getElementById("plainInput"),b=document.getElementById("base64Output"),d=document.getElementById("urlSafeEncode"),f=document.getElementById("base64Input"),l=document.getElementById("stripWhitespace"),u=document.getElementById("urlSafeDecode"),B=document.getElementById("plainOutput"),g=document.getElementById("base64Message"),s=document.getElementById("fileInput"),i=document.getElementById("downloadFileBtn"),m=document.getElementById("downloadFileName");function a(e,t=!1){g.textContent=e,g.classList.toggle("message--error",t)}function v(e){const t=document.getElementById(e);if(!t)return;const c=t.value||t.textContent||"";navigator.clipboard.writeText(c).then(()=>a(o("common.copySuccess"))).catch(()=>a(o("common.copyFail"),!0))}function I(e){const t=new TextEncoder().encode(e);let c="";return t.forEach(n=>{c+=String.fromCharCode(n)}),btoa(c)}function k(e){const t=atob(e),c=new Uint8Array(t.length);for(let n=0;n<t.length;n+=1)c[n]=t.charCodeAt(n);return new TextDecoder().decode(c)}function w(e){const t=new Uint8Array(e);let c="";const n=32768;for(let r=0;r<t.length;r+=n){const h=t.subarray(r,r+n);c+=String.fromCharCode(...h)}return btoa(c)}function L(e){const t=atob(e),c=new Uint8Array(t.length);for(let n=0;n<t.length;n+=1)c[n]=t.charCodeAt(n);return c}function U(e,t="decoded.bin"){const c=new Blob([e],{type:"application/octet-stream"}),n=URL.createObjectURL(c),r=document.createElement("a");r.href=n,r.download=t||"decoded.bin",document.body.appendChild(r),r.click(),r.remove(),URL.revokeObjectURL(n)}function p(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function C(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),c=(4-t.length%4)%4;return t+"=".repeat(c)}function E(e){let t=e||"";return l!=null&&l.checked&&(t=t.replace(/\s+/g,"")),u!=null&&u.checked&&(t=C(t)),t}document.querySelectorAll("button[data-copy]").forEach(e=>{e.addEventListener("click",()=>v(e.dataset.copy))});document.getElementById("encodeBtn").addEventListener("click",()=>{try{const e=I(y.value||"");b.value=d.checked?p(e):e,a(o("messages.base64.encodeSuccess"))}catch{a(o("messages.base64.encodeError"),!0)}});document.getElementById("decodeBtn").addEventListener("click",()=>{try{const e=E(f.value);B.value=k(e),a(o("messages.base64.decodeSuccess"))}catch{a(o("messages.base64.decodeError"),!0)}});s==null||s.addEventListener("change",async()=>{var t;const e=(t=s.files)==null?void 0:t[0];if(e)try{const c=await e.arrayBuffer();let n=w(c);d!=null&&d.checked&&(n=p(n)),b.value=n,y.value="",a(o("messages.base64.fileEncoded",{name:e.name}))}catch{a(o("messages.base64.fileError"),!0)}finally{s.value=""}});i==null||i.addEventListener("click",()=>{try{const e=E(f.value);if(!e){a(o("messages.base64.decodeError"),!0);return}const t=L(e);U(t,(m==null?void 0:m.value)||"decoded.bin"),a(o("messages.base64.fileDecoded"))}catch{a(o("messages.base64.fileError"),!0)}});
